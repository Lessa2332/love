<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghost Hunter AR - –ó PNG –ø—Ä–∏–≤–∏–¥–∞–º–∏</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: #000;
            color: white;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }
        
        #ar-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(45deg, #0a0a0a, #1a1a2e);
            perspective: 1000px;
        }
        
        .ghost {
            position: absolute;
            pointer-events: none;
            transition: all 0.3s ease-out;
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.7));
            transform-style: preserve-3d;
            /* –†–æ–∑–º—ñ—Ä –±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏—Å—å —á–µ—Ä–µ–∑ JS */
        }
        
        .ghost img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        .instructions {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            padding: 15px 25px;
            border-radius: 15px;
            text-align: center;
            z-index: 100;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            max-width: 90%;
        }
        
        /* –†–µ—à—Ç–∞ —Å—Ç–∏–ª—ñ–≤ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω */
        .distance-indicator {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.7);
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 14px;
            backdrop-filter: blur(5px);
        }
        
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            text-align: center;
            padding: 20px;
        }
        
        .start-btn {
            background: #4CAF50;
            border: none;
            color: white;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 25px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
        }
    </style>
</head>
<body>
    <div id="ar-container">
        <div class="start-screen" id="startScreen">
            <h1>üëª Ghost Hunter AR</h1>
            <p>–ú–æ–±—ñ–ª—å–Ω–∞ –≥—Ä–∞ –¥–ª—è –ø–æ–ª—é–≤–∞–Ω–Ω—è –Ω–∞ –ø—Ä–∏–≤–∏–¥—ñ–≤</p>
            <button class="start-btn" id="startBtn">–ü–æ—á–∞—Ç–∏ –≥—Ä—É</button>
        </div>
        
        <div class="instructions">
            <h2>üëª –ú–∏—Å–ª–∏–≤—Ü—ñ –∑–∞ –ø—Ä–∏–≤–∏–¥–∞–º–∏</h2>
            <p>–û–±–µ—Ä—Ç–∞–π—Ç–µ —Ç–µ–ª–µ—Ñ–æ–Ω, —â–æ–± –∑–Ω–∞–π—Ç–∏ –ø—Ä–∏–≤–∏–¥—ñ–≤ –Ω–∞–≤–∫–æ–ª–æ –≤–∞—Å!</p>
        </div>
        
        <div class="distance-indicator" id="distanceInfo">
            –ë–ª–∏–∂–Ω—ñ–π –ø—Ä–∏–≤–∏–¥: ---
        </div>
    </div>

    <script>
        class GhostHunterAR {
            constructor() {
                this.container = document.getElementById('ar-container');
                this.startScreen = document.getElementById('startScreen');
                this.startBtn = document.getElementById('startBtn');
                this.distanceInfo = document.getElementById('distanceInfo');
                
                this.ghosts = [];
                this.currentAlpha = 0;
                this.isRunning = false;
                
                // PNG –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø—Ä–∏–≤–∏–¥—ñ–≤ (–∑–∞–º—ñ—Å—Ç—å –µ–º–æ–¥–∑—ñ)
                this.ghostImages = [
                    'ghost1.png',
                    'ghost2.png', 
                    'ghost3.png',
                    'ghost4.png'
                ];
                
                // –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –æ–Ω–ª–∞–π–Ω –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è:
                this.onlineGhostImages = [
                    'https://cdn-icons-png.flaticon.com/512/105/105223.png',
                    'https://cdn-icons-png.flaticon.com/512/2601/2601981.png',
                    'https://cdn-icons-png.flaticon.com/512/2601/2601992.png'
                ];
                
                this.ghostSizes = {
                    veryClose: { min: 120, max: 150 },
                    close: { min: 80, max: 100 },
                    medium: { min: 50, max: 70 },
                    far: { min: 30, max: 45 }
                };
                
                this.init();
            }
            
            async init() {
                this.startBtn.addEventListener('click', () => this.startGame());
                
                if (!window.DeviceOrientationEvent) {
                    this.showError('–í–∞—à –ø—Ä–∏—Å—Ç—Ä—ñ–π –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –¥–∞—Ç—á–∏–∫–∏ —Ä—É—Ö—É');
                    return;
                }
            }
            
            async startGame() {
                this.startScreen.style.display = 'none';
                this.isRunning = true;
                
                await this.requestPermissions();
                this.setupEventListeners();
                this.createInitialGhosts();
                this.animate();
            }
            
            createInitialGhosts() {
                const distanceLevels = [
                    { distance: 30, count: 2, sizeType: 'veryClose' },
                    { distance: 70, count: 3, sizeType: 'close' },
                    { distance: 120, count: 4, sizeType: 'medium' },
                    { distance: 200, count: 5, sizeType: 'far' }
                ];
                
                distanceLevels.forEach(level => {
                    for (let i = 0; i < level.count; i++) {
                        this.createGhost(
                            Math.random() * 360,
                            level.distance,
                            level.sizeType
                        );
                    }
                });
            }
            
            createGhost(angle, distance, sizeType) {
                const ghost = document.createElement('div');
                ghost.className = 'ghost';
                
                // –°—Ç–≤–æ—Ä—é—î–º–æ img –µ–ª–µ–º–µ–Ω—Ç
                const img = document.createElement('img');
                
                // –í–∏–±–µ—Ä—ñ—Ç—å –æ–¥–∏–Ω –∑ –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤:
                
                // –í–∞—Ä—ñ–∞–Ω—Ç 1: –õ–æ–∫–∞–ª—å–Ω—ñ PNG (–ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª–∏)
                // img.src = this.ghostImages[Math.floor(Math.random() * this.ghostImages.length)];
                
                // –í–∞—Ä—ñ–∞–Ω—Ç 2: –û–Ω–ª–∞–π–Ω PNG (–ø—Ä–∞—Ü—é—î –≤—ñ–¥—Ä–∞–∑—É)
                img.src = this.onlineGhostImages[Math.floor(Math.random() * this.onlineGhostImages.length)];
                
                // –í–∞—Ä—ñ–∞–Ω—Ç 3: –ï–º–æ–¥–∑—ñ (—è–∫ —É –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É –∫–æ–¥—ñ)
                // ghost.innerHTML = 'üëª';
                
                ghost.appendChild(img);
                
                // –†–æ–∑–º—ñ—Ä –ø—Ä–∏–≤–∏–¥–∞
                const sizeRange = this.ghostSizes[sizeType];
                const size = Math.random() * (sizeRange.max - sizeRange.min) + sizeRange.min;
                ghost.style.width = `${size}px`;
                ghost.style.height = `${size}px`;
                
                ghost.dataset.angle = angle;
                ghost.dataset.distance = distance;
                ghost.dataset.sizeType = sizeType;
                ghost.dataset.originalSize = size;
                
                this.container.appendChild(ghost);
                this.ghosts.push(ghost);
                
                return ghost;
            }
            
            // –†–µ—à—Ç–∞ –º–µ—Ç–æ–¥—ñ–≤ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω...
            async requestPermissions() {
                if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                    try {
                        const permission = await DeviceOrientationEvent.requestPermission();
                        if (permission !== 'granted') {
                            this.showError('–î–æ–∑–≤—ñ–ª –Ω–∞ –¥–æ—Å—Ç—É–ø –¥–æ –¥–∞—Ç—á–∏–∫—ñ–≤ –Ω–µ –Ω–∞–¥–∞–Ω–æ!');
                            this.isRunning = false;
                        }
                    } catch (error) {
                        this.showError('–ü–æ–º–∏–ª–∫–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ –¥–∞—Ç—á–∏–∫—ñ–≤');
                        this.isRunning = false;
                    }
                }
            }
            
            setupEventListeners() {
                window.addEventListener('deviceorientation', (event) => {
                    if (!this.isRunning) return;
                    this.currentAlpha = event.alpha || 0;
                    this.updateGhostsPosition();
                });
            }
            
            updateGhostsPosition() {
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                let closestGhost = { distance: Infinity, element: null };
                
                this.ghosts.forEach(ghost => {
                    const ghostAngle = parseFloat(ghost.dataset.angle);
                    const ghostDistance = parseFloat(ghost.dataset.distance);
                    
                    let angleDiff = ghostAngle - this.currentAlpha;
                    if (angleDiff > 180) angleDiff -= 360;
                    if (angleDiff < -180) angleDiff += 360;
                    
                    const distanceFactor = ghostDistance / 200;
                    const angleFactor = Math.abs(angleDiff) / 180;
                    
                    const scale = Math.max(0.1, 1 - angleFactor * 0.8);
                    const opacity = Math.max(0.05, 0.8 - angleFactor * 0.7);
                    
                    const screenX = centerX + (angleDiff * 5);
                    const screenY = centerY;
                    
                    ghost.style.transform = `translate(${screenX}px, ${screenY}px) scale(${scale})`;
                    ghost.style.opacity = opacity;
                    
                    const totalDistance = angleFactor * 100 + ghostDistance;
                    if (totalDistance < closestGhost.distance && angleFactor < 0.3) {
                        closestGhost = { 
                            distance: totalDistance, 
                            element: ghost,
                            sizeType: ghost.dataset.sizeType
                        };
                    }
                });
                
                this.updateDistanceIndicator(closestGhost);
            }
            
            updateDistanceIndicator(closestGhost) {
                if (closestGhost.element) {
                    const distanceText = this.getDistanceText(closestGhost.distance, closestGhost.sizeType);
                    this.distanceInfo.textContent = `–ù–∞–π–±–ª–∏–∂—á–∏–π –ø—Ä–∏–≤–∏–¥: ${distanceText}`;
                }
            }
            
            getDistanceText(distance, sizeType) {
                switch(sizeType) {
                    case 'veryClose': return '–î–£–ñ–ï –ë–õ–ò–ó–¨–ö–û! üö®';
                    case 'close': return '–±–ª–∏–∑—å–∫–æ ‚ö†Ô∏è';
                    case 'medium': return '–ø–æ–±–ª–∏–∑—É üëÄ';
                    case 'far': return '–¥–∞–ª–µ–∫–æ üëÅÔ∏è';
                    default: return '–Ω–µ–≤–∏–∑–Ω–∞—á–µ–Ω–æ';
                }
            }
            
            animate() {
                if (!this.isRunning) return;
                
                this.ghosts.forEach((ghost, index) => {
                    const floatOffset = Math.sin(Date.now() * 0.001 + index) * 10;
                    ghost.style.transform += ` translateY(${floatOffset}px)`;
                });
                
                requestAnimationFrame(() => this.animate());
            }
            
            showError(message) {
                this.startScreen.innerHTML = `<h1>üòï –ü–æ–º–∏–ª–∫–∞</h1><p>${message}</p>`;
                this.startScreen.style.display = 'flex';
            }
        }
        
        window.addEventListener('load', () => {
            new GhostHunterAR();
        });
    </script>
</body>
</html>
